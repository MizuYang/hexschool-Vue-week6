(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f21e140"],{"0b42":function(t,e,n){var c=n("da84"),o=n("e8b5"),a=n("68ee"),r=n("861d"),i=n("b622"),u=i("species"),l=c.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,a(e)&&(e===l||o(e.prototype))?e=void 0:r(e)&&(e=e[u],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,n){var c=n("d039"),o=n("b622"),a=n("2d00"),r=o("species");t.exports=function(t){return a>=51||!c((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,n){var c=n("0b42");t.exports=function(t,e){return new(c(t))(0===e?0:e)}},8418:function(t,e,n){"use strict";var c=n("a04b"),o=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var r=c(e);r in t?o.f(t,r,a(0,n)):t[r]=n}},"99af":function(t,e,n){"use strict";var c=n("23e7"),o=n("da84"),a=n("d039"),r=n("e8b5"),i=n("861d"),u=n("7b0b"),l=n("07fa"),s=n("8418"),d=n("65f0"),b=n("1dde"),g=n("b622"),f=n("2d00"),p=g("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",h=o.TypeError,v=f>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=b("concat"),y=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},_=!v||!m;c({target:"Array",proto:!0,forced:_},{concat:function(t){var e,n,c,o,a,r=u(this),i=d(r,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(a=-1===e?r:arguments[e],y(a)){if(o=l(a),b+o>O)throw h(j);for(n=0;n<o;n++,b++)n in a&&s(i,b,a[n])}else{if(b>=O)throw h(j);s(i,b++,a)}return i.length=b,i}})},a9bd:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),o={class:"container"},a=Object(c["g"])("div",{class:"text-center mb-3"},[Object(c["g"])("h2",null,"購物車")],-1),r={class:"row justify-content-center"},i={class:"col-10"},u={class:"table text-center align-middle fs-4"},l=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th"),Object(c["g"])("th"),Object(c["g"])("th",null,"品名"),Object(c["g"])("th",null,"數量"),Object(c["g"])("th",null,"金額"),Object(c["g"])("th"),Object(c["g"])("th")])],-1),s=["onClick"],d=["src"],b={class:"fs-3"},g={style:{width:"150px"}},f={class:"input-group mb-3"},p=["onUpdate:modelValue","onBlur","disabled"],O={class:"input-group-text"},j=Object(c["g"])("td",null,null,-1),h={key:1},v=Object(c["g"])("td",null,null,-1),m=Object(c["g"])("td",null,null,-1),y=Object(c["g"])("td",null,"無",-1),_=Object(c["g"])("td",null,"無",-1),w=Object(c["g"])("td",null,"無",-1),x=[v,m,y,_,w],C=Object(c["g"])("td",null,null,-1),k=Object(c["g"])("td",null,null,-1),L=Object(c["g"])("td",null,null,-1),q=Object(c["g"])("td",null,"總計",-1),A=["disabled"];function F(t,e,n,v,m,y){var _=Object(c["C"])("loadingComponent");return Object(c["w"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",o,[a,Object(c["g"])("div",r,[Object(c["g"])("div",i,[Object(c["g"])("table",u,[l,Object(c["g"])("tbody",null,[m.cartList?(Object(c["w"])(!0),Object(c["f"])(c["a"],{key:0},Object(c["B"])(m.cartList,(function(t){return Object(c["w"])(),Object(c["f"])("tr",{key:t.id},[Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return y.remove_cart_product(t.id)}}," 刪除 ",8,s)]),Object(c["g"])("td",null,[Object(c["g"])("img",{src:t.product.imageUrl,style:{width:"200px",height:"150px","object-fit":"cover"},alt:"",class:"img-fluid"},null,8,d)]),Object(c["g"])("td",null,[Object(c["g"])("span",b,Object(c["F"])(t.product.title),1)]),Object(c["g"])("td",g,[Object(c["g"])("div",f,[Object(c["O"])(Object(c["g"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(e){return y.update_product_qty(t)},disabled:m.loading_item===t.id},null,40,p),[[c["I"],t.qty]]),Object(c["g"])("span",O,Object(c["F"])(t.product.unit),1)])]),Object(c["g"])("td",null,Object(c["F"])(t.product.price)+"元",1),Object(c["g"])("td",null,Object(c["F"])(t.total),1),j])})),128)):Object(c["e"])("",!0),0===m.cartList.length?(Object(c["w"])(),Object(c["f"])("tr",h,x)):Object(c["e"])("",!0)]),Object(c["g"])("tfoot",null,[Object(c["g"])("tr",null,[Object(c["g"])("td",null,[Object(c["g"])("div",null,[Object(c["g"])("button",{type:"button",class:"btn btn-secondary p-3 fs-4",onClick:e[0]||(e[0]=function(e){return t.$router.push("/product_List")})}," 返回 ")])]),C,k,L,q,Object(c["g"])("td",null,Object(c["F"])(m.product_total)+" 元",1),Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",onClick:e[1]||(e[1]=function(e){return t.$router.push("/form")}),class:"btn btn-outline-danger p-3 fs-4",disabled:0===m.cartList.length}," 結帳 ",8,A)])])])])])])]),Object(c["i"])(_)],64)}n("99af");var $=n("eab4"),B=n("c6e3"),z={components:{loadingComponent:$["a"]},data:function(){return{cartList:[],product_total:0,loading_item:"",loading_status:!1}},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("mizu123","/cart");this.$http.get(e).then((function(e){t.cartList=e.data.data.carts,t.product_total=e.data.data.final_total})).catch((function(t){alert(t.data.message)}))},remove_cart_product:function(t){var e=this,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("mizu123","/cart/").concat(t);this.$http.delete(n).then((function(t){e.getCart(),alert(t.data.message),B["a"].emit("remove_cart_product")})).catch((function(t){alert(t.data.message)}))},update_product_qty:function(t){var e=this;if(this.loading(t.id),!t.qty)return alert("請輸入正確數字"),void this.getCart();var n={product_id:t.product_id,qty:t.qty},c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("mizu123","/cart/").concat(t.id);this.$http.put(c,{data:n}).then((function(t){e.getCart(),alert(t.data.message)})).catch((function(t){alert(t.data.message)}))},loading:function(t){var e=this;this.loading_item=t,setTimeout((function(){e.loading_item=""}),1e3)}},mounted:function(){this.getCart()}},J=n("6b0d"),T=n.n(J);const U=T()(z,[["render",F]]);e["default"]=U},c6e3:function(t,e,n){"use strict";var c=function(t){return{all:t=t||new Map,on:function(e,n){var c=t.get(e);c?c.push(n):t.set(e,[n])},off:function(e,n){var c=t.get(e);c&&(n?c.splice(c.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var c=t.get(e);c&&c.slice().map((function(t){t(n)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,n)}))}}},o=c();e["a"]=o},e8b5:function(t,e,n){var c=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}},eab4:function(t,e,n){"use strict";var c=n("7a23"),o={class:"position-absolute top-50 start-50"},a=Object(c["g"])("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},[Object(c["g"])("span",{class:"visually-hidden"},"Loading...")],-1),r=[a];function i(t,e,n,a,i,u){return Object(c["O"])((Object(c["w"])(),Object(c["f"])("div",o,r,512)),[[c["J"],i.loading_status]])}var u={data:function(){return{loading_status:!1}},methods:{loading_window:function(t){var e=this;this.loading_status=!0,setTimeout((function(){e.loading_status=!1}),t)}},mounted:function(){this.loading_window(500)}},l=n("6b0d"),s=n.n(l);const d=s()(u,[["render",i]]);e["a"]=d}}]);
//# sourceMappingURL=chunk-6f21e140.89b051b7.js.map